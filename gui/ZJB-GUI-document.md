---
myst:
  html_meta:
    "referrer": "no-referrer"
---

<a name="Gs0aj"></a>
# 使用手册
<a name="h1LuJ"></a>
## 平台概览
<a name="YO2WP"></a>
### 目标
通过这一模块的阅读，您能够对ZJB平台的各项功能有一个初步的了解，这将更好的帮助您利用ZJB平台实现数字孪生脑建模仿真的工作。
<a name="cWxdc"></a>


### 启动平台进入首页
启动 ZJB 平台，平台界面主要由标题栏、导航栏、窗口区组成。

- 顶部标题栏包含平台名称、logo、新建按钮 <img src="https://cdn.nlark.com/yuque/0/2023/png/21489474/1700200583110-74d1dbe0-f349-43e0-a46d-045ff4dabd18.png#averageHue=%23282725&clientId=ud61fefda-3ef2-4&from=paste&height=18&id=ua3adc30e&originHeight=39&originWidth=93&originalType=binary&ratio=1.875&rotation=0&showTitle=false&size=780&status=done&style=none&taskId=u2ca82fe8-9dd7-4678-96f9-a51f08a5528&title=&width=43" height="20px" />、打开按钮 <img src="https://cdn.nlark.com/yuque/0/2023/png/21489474/1700200562429-0690af27-f740-47cf-9392-fdf0500ac5e3.png#averageHue=%23272524&clientId=ud61fefda-3ef2-4&from=paste&height=18&id=u1963d410&originHeight=43&originWidth=110&originalType=binary&ratio=1.875&rotation=0&showTitle=false&size=791&status=done&style=none&taskId=u8a72b338-b4c0-4275-87a4-c0eaf9564c4&title=&width=46"  height="20px" /> 和Jupyter按钮 <img src="https://cdn.nlark.com/yuque/0/2023/png/21489474/1700200608687-908f4a62-5df4-4f03-a3dc-21ce33cdf70f.png#averageHue=%232a2825&clientId=ud61fefda-3ef2-4&from=paste&height=18&id=uadd92ea9&originHeight=39&originWidth=100&originalType=binary&ratio=1.875&rotation=0&showTitle=false&size=757&status=done&style=none&taskId=ud8fa1fd6-b1f1-467d-aa6e-87c874405a0&title=&width=46"  height="20px" />  。
- 左侧导航栏包含按钮：展开导航栏 <img src="https://cdn.nlark.com/yuque/0/2023/png/21489474/1700205273538-dd976d5c-feae-4976-a119-424dbd5904c5.png#averageHue=%232a2a2a&clientId=ud61fefda-3ef2-4&from=paste&height=18&id=u7e0d6380&originHeight=47&originWidth=47&originalType=binary&ratio=1.875&rotation=0&showTitle=false&size=260&status=done&style=none&taskId=u5d74fcc7-6d4b-4792-89c9-6c5916a829a&title=&width=18"  height="20px" /> 、数字孪生脑 <img src="https://cdn.nlark.com/yuque/0/2023/png/21489474/1700201274471-b07ad81d-91b0-4c33-955d-c925bfa50a3e.png#averageHue=%23363636&clientId=ud61fefda-3ef2-4&from=paste&height=24&id=u4ce71555&originHeight=45&originWidth=49&originalType=binary&ratio=1.875&rotation=0&showTitle=false&size=897&status=done&style=none&taskId=u4a67941b-d813-42e8-a76b-b62a45c81a6&title=&width=26.133333333333333"  height="20px" /> 、脑图谱 <img src="https://cdn.nlark.com/yuque/0/2023/png/21489474/1700201321710-8eeb0a77-7d19-4708-813b-412199b8e104.png#averageHue=%23323232&clientId=ud61fefda-3ef2-4&from=paste&height=22&id=u5598e02d&originHeight=42&originWidth=43&originalType=binary&ratio=1.875&rotation=0&showTitle=false&size=452&status=done&style=none&taskId=u8307d055-b29e-436a-bea3-eff25558274&title=&width=22.933333333333334"  height="20px" />、动力学模型 <img src="https://cdn.nlark.com/yuque/0/2023/png/21489474/1700201350871-b214ec98-a47f-4244-be4e-374b9fe745e6.png#averageHue=%232c2c2c&clientId=ud61fefda-3ef2-4&from=paste&height=23&id=u7b8f19dd&originHeight=43&originWidth=43&originalType=binary&ratio=1.875&rotation=0&showTitle=false&size=882&status=done&style=none&taskId=u7bab1475-b08f-4b3b-939f-b06564254ec&title=&width=22.933333333333334"  height="20px" /> 、作业管理 <img src="https://cdn.nlark.com/yuque/0/2023/png/21489474/1700201374735-5ea4341c-46cd-423a-958c-beb3e56d716b.png#averageHue=%232d2d2d&clientId=ud61fefda-3ef2-4&from=paste&height=24&id=uc35ebdb1&originHeight=45&originWidth=45&originalType=binary&ratio=1.875&rotation=0&showTitle=false&size=859&status=done&style=none&taskId=uf20397c9-832e-4642-ad69-37cf548ea5e&title=&width=24"  height="20px" /> 、设置页 <img src="https://cdn.nlark.com/yuque/0/2023/png/21489474/1700446981240-5040010d-4b38-4a7b-935c-546eedc8829d.png#averageHue=%23343434&clientId=ue8dab574-33a7-4&from=paste&height=22&id=jfaeB&originHeight=42&originWidth=41&originalType=binary&ratio=1.875&rotation=0&showTitle=false&size=1017&status=done&style=none&taskId=u05ee8110-2036-4ea3-8184-f03cb3e2d88&title=&width=21.866666666666667"  height="20px" /> ，点击按钮可以进入对应内容的目录页。
- 窗口区默认显示Welcome页面，提供新建工作空间 <img src="https://cdn.nlark.com/yuque/0/2023/png/21489474/1700201976541-50a5d8e4-69fb-490d-8da5-914f7a31c07b.png#averageHue=%232c2a29&clientId=ud61fefda-3ef2-4&from=paste&height=25&id=uce2e4e54&originHeight=47&originWidth=205&originalType=binary&ratio=1.875&rotation=0&showTitle=false&size=2158&status=done&style=none&taskId=u567ba0a6-d770-447b-be98-a11b4df1af5&title=&width=109.33333333333333"  height="20px" /> 和打开工作空间 <img src="https://cdn.nlark.com/yuque/0/2023/png/21489474/1700202006322-9567d83e-366e-4439-85f8-b117299a7471.png#averageHue=%232a2827&clientId=ud61fefda-3ef2-4&from=paste&height=25&id=uf0eea240&originHeight=47&originWidth=227&originalType=binary&ratio=1.875&rotation=0&showTitle=false&size=1977&status=done&style=none&taskId=u634ae985-3ffc-4679-ad30-04e542edb61&title=&width=121.06666666666666"  height="20px" /> 等操作。  

![image.png](https://cdn.nlark.com/yuque/0/2023/png/21489474/1700189735606-a9ddf274-63f7-4793-bae0-eed5f442b5cb.png#averageHue=%23201f1c&clientId=ud61fefda-3ef2-4&from=paste&height=595&id=ua7aec40c&originHeight=1118&originWidth=1720&originalType=binary&ratio=1.875&rotation=0&showTitle=false&size=278074&status=done&style=none&taskId=u5951ca67-f725-4671-90d0-4841cdeaf0e&title=&width=915)
<a name="sdb0w"></a>
### 新建/打开工作空间
“工作空间”为一个独立的本地数据库，在使用平台进行数字孪生脑仿真时，创建、生成的所有数据，都保存在这个工作空间对应的本地数据库中。因此，使用数字孪生脑的第一步需要您新建或者打开一个工作空间。

1. 新建工作空间
- 可以通过“标题栏->New->New Workspace”或者“Welcome页->New Workspace”进入创建工作空间的窗口。  

![image.png](https://cdn.nlark.com/yuque/0/2023/png/21489474/1700203301444-5a93fc86-96c9-4a58-aea6-8a2219411e35.png#averageHue=%2322211f&clientId=ud61fefda-3ef2-4&from=paste&height=600&id=u662d0d9c&originHeight=1125&originWidth=1725&originalType=binary&ratio=1.875&rotation=0&showTitle=false&size=366347&status=done&style=none&taskId=ud6e9ab29-6c3c-45e2-9bfc-7a90954e365&title=&width=920)

- 为工作空间取一个名字，并选择工作空间的存储路径，即成功创建工作空间。工作空间名称支持1至20个由数字、大小写字母及下划线组成的字符串。  

![image.png](https://cdn.nlark.com/yuque/0/2023/png/21489474/1700204487482-2907fc50-5a56-40e0-bf83-92ea045b69ec.png#averageHue=%232e2e2d&clientId=ud61fefda-3ef2-4&from=paste&height=211&id=u3a072ddb&originHeight=396&originWidth=477&originalType=binary&ratio=1.875&rotation=0&showTitle=false&size=16150&status=done&style=none&taskId=uc9f5abb7-1832-42ed-8cc9-6047e7c293d&title=&width=254.4)

- 创建完成后，自动打开该工作空间，并在目录列表中显示工作空间的根目录。  

![image.png](https://cdn.nlark.com/yuque/0/2023/png/21489474/1700204940305-1b339251-4f6e-45d2-9443-ee9d91759273.png#averageHue=%2323221b&clientId=ud61fefda-3ef2-4&from=paste&height=291&id=u41096f9a&originHeight=546&originWidth=1717&originalType=binary&ratio=1.875&rotation=0&showTitle=false&size=152114&status=done&style=none&taskId=u54137778-278a-4b00-939a-27a3dc45b5c&title=&width=915.7333333333333)

2. 打开工作空间

若您已经通过数字孪生脑平台建立了其他的工作空间，可以通过“标题栏->Open->WorkSpace”或者“Welcome页->Open Workspace”操作，打开您本地已有的工作空间。此外，您还可以通过“标题栏->Open”或者“Welcome页->RECENT”快捷的打开您近期打开过的工作空间。  

![image.png](https://cdn.nlark.com/yuque/0/2023/png/21489474/1700205392217-53bea343-18fa-4803-b3f2-bb6202a8e3a2.png#averageHue=%2321201d&clientId=ud61fefda-3ef2-4&from=paste&height=600&id=u23824901&originHeight=1125&originWidth=1725&originalType=binary&ratio=1.875&rotation=0&showTitle=false&size=263944&status=done&style=none&taskId=ue9e7b409-2269-4bd6-95cc-1c5250ad1c0&title=&width=920)
<a name="IYZM3"></a>
### 数字孪生脑页面
通过点击导航栏 <img src="https://cdn.nlark.com/yuque/0/2023/png/21489474/1700201274471-b07ad81d-91b0-4c33-955d-c925bfa50a3e.png#averageHue=%23363636&clientId=ud61fefda-3ef2-4&from=paste&height=24&id=WEXOW&originHeight=45&originWidth=49&originalType=binary&ratio=1.875&rotation=0&showTitle=false&size=897&status=done&style=none&taskId=u4a67941b-d813-42e8-a76b-b62a45c81a6&title=&width=26.133333333333333"  height="20px" /> 按钮，进入到数字孪生脑页面。

- 打开工作空间以后，在目录列表中会陈列您创建的各类数据，数据主要包含五个类别，用不同的图标进行区分。目录最顶层的 <img src="https://cdn.nlark.com/yuque/0/2023/png/21489474/1700206932616-89c883f3-9db7-4a55-93ad-a77103d3a218.png#averageHue=%23373737&clientId=ud61fefda-3ef2-4&from=paste&height=22&id=oIZqz&originHeight=42&originWidth=42&originalType=binary&ratio=1.875&rotation=0&showTitle=false&size=437&status=done&style=none&taskId=uaeb48753-bfff-44fe-9486-f56d3b2f05c&title=&width=22.4"  height="20px" /> 表示当前打开的工作空间“Workspace”，其下包含的所有 <img src="https://cdn.nlark.com/yuque/0/2023/png/21489474/1700206975977-d3af1ac3-6f1f-4841-9fb6-646a17bf6fd2.png#averageHue=%23373737&clientId=ud61fefda-3ef2-4&from=paste&height=22&id=NaMbt&originHeight=42&originWidth=42&originalType=binary&ratio=1.875&rotation=0&showTitle=false&size=437&status=done&style=none&taskId=u5ac18b1f-15ba-43aa-ab67-a30472eaffe&title=&width=22.4"  height="20px" /> 都表示一个项目“Project”；<img src="https://cdn.nlark.com/yuque/0/2023/png/21489474/1700207039260-6be37041-bfbb-4105-a69a-99ca5bcbed9c.png#averageHue=%233a3a3a&clientId=ud61fefda-3ef2-4&from=paste&height=21&id=T5BDh&originHeight=40&originWidth=42&originalType=binary&ratio=1.875&rotation=0&showTitle=false&size=1003&status=done&style=none&taskId=u5b986e21-3d20-4c3d-80c1-f06a773608b&title=&width=22.4"  height="20px" />  表示一个被试“Subject”；<img src="https://cdn.nlark.com/yuque/0/2023/png/21489474/1700207080216-36f9a82f-8f69-4756-adfa-72aa1b6b68b5.png#averageHue=%233a3a3a&clientId=ud61fefda-3ef2-4&from=paste&height=22&id=qYcrf&originHeight=42&originWidth=42&originalType=binary&ratio=1.875&rotation=0&showTitle=false&size=805&status=done&style=none&taskId=u80bafac8-036b-45d7-92b5-99266f8c700&title=&width=22.4"  height="20px" /> 表示一个数字孪生脑模型“DTB Model”; <img src="https://cdn.nlark.com/yuque/0/2023/png/21489474/1700207116332-dbf22315-896f-42f4-9873-50425bad3405.png#averageHue=%23454545&clientId=ud61fefda-3ef2-4&from=paste&height=22&id=qWrCq&originHeight=41&originWidth=41&originalType=binary&ratio=1.875&rotation=0&showTitle=false&size=669&status=done&style=none&taskId=ub3c829c2-7f96-431d-ab5d-b80c54fcab9&title=&width=21.866666666666667"  height="20px" /> 表示一个数字孪生脑“DTB”。

![image.png](https://cdn.nlark.com/yuque/0/2023/png/21489474/1700206690889-7f944bd6-712c-483b-b403-caf2ea07f6e7.png#averageHue=%23201f1c&clientId=ud61fefda-3ef2-4&from=paste&height=600&id=u6bcd2599&originHeight=1125&originWidth=1725&originalType=binary&ratio=1.875&rotation=0&showTitle=false&size=294132&status=done&style=none&taskId=ub7b4a2d0-018d-4201-b031-aca63c64c82&title=&width=920)

- 工作空间 Workspace 是一个特殊的项目 Project，他们都包含子Project、Subject、DTB Model、DTB。右键目录列表中的条目可进行新建或删除各类数据的操作。左键点击目录中的各个数据条目能够在右侧窗口区打开该数据的详情页面，所有页面都可以通过tab标签中的按钮进行关闭。左键双击可打开或折叠子目录。

![image.png](https://cdn.nlark.com/yuque/0/2023/png/21489474/1700211597630-b62432aa-ee4b-4506-b827-2c836cd4d3cb.png#averageHue=%23262626&clientId=ua9419262-3734-4&from=paste&height=600&id=ue30501b5&originHeight=1125&originWidth=1725&originalType=binary&ratio=1.875&rotation=0&showTitle=false&size=134648&status=done&style=none&taskId=u1b478d21-a46d-4ee0-b7aa-7a06e46bb2e&title=&width=920)
<a name="vQPGR"></a>
### 脑图谱页面
在打开工作空间的情况下，通过点击导航栏 <img src="https://cdn.nlark.com/yuque/0/2023/png/21489474/1700201321710-8eeb0a77-7d19-4708-813b-412199b8e104.png#averageHue=%23323232&clientId=ud61fefda-3ef2-4&from=paste&height=22&id=a0pRG&originHeight=42&originWidth=43&originalType=binary&ratio=1.875&rotation=0&showTitle=false&size=452&status=done&style=none&taskId=u8307d055-b29e-436a-bea3-eff25558274&title=&width=22.933333333333334"  height="20px" /> 按钮，进入到脑图谱页面。点击目录列表中的脑图谱数据 <img src="https://cdn.nlark.com/yuque/0/2023/png/21489474/1700444951297-d196d196-cf02-45c3-af1a-0c90938286e2.png#averageHue=%23353535&clientId=ue8dab574-33a7-4&from=paste&height=23&id=u1522076b&originHeight=43&originWidth=42&originalType=binary&ratio=1.875&rotation=0&showTitle=false&size=732&status=done&style=none&taskId=u06f44bdb-242a-4860-9d2e-1ce366ad669&title=&width=22.4"  height="20px" />  条目，窗口区会打开该数据的详情页面。如果您的工作空间中有很多脑图谱数据，您可以都将它们在右侧的窗口中打开。

![image.png](https://cdn.nlark.com/yuque/0/2023/png/21489474/1700211426581-addac9ae-3bea-465a-9e60-093174cb45b2.png#averageHue=%23312b28&clientId=ua9419262-3734-4&from=paste&height=600&id=u93fc406a&originHeight=1125&originWidth=1725&originalType=binary&ratio=1.875&rotation=0&showTitle=false&size=961473&status=done&style=none&taskId=u62c7cbe4-8435-4b05-9e9d-933a397453e&title=&width=920)
<a name="D8pOp"></a>
### 动力学模型页面
在打开工作空间的情况下，通过点击导航栏 <img src="https://cdn.nlark.com/yuque/0/2023/png/21489474/1700444585084-0c2d05c8-86f7-4cff-94db-af92fd4f53f9.png#averageHue=%232c2c2c&clientId=ue8dab574-33a7-4&from=paste&height=18&id=u725d0d8f&originHeight=42&originWidth=42&originalType=binary&ratio=1.875&rotation=0&showTitle=false&size=881&status=done&style=none&taskId=ub2dd0e89-4ee8-4464-83b4-67e81493a7d&title=&width=18.400001525878906"  height="20px" /> 按钮，进入到动力学模型页面。平台提供了多种常见的动力学模型，点击对应的条目 <img src="https://cdn.nlark.com/yuque/0/2023/png/21489474/1700445136791-aab27408-a65b-496d-9620-3914bbae892b.png#averageHue=%233a3a3a&clientId=ue8dab574-33a7-4&from=paste&height=18&id=u1f8347a1&originHeight=41&originWidth=41&originalType=binary&ratio=1.875&rotation=0&showTitle=false&size=716&status=done&style=none&taskId=udbe1d01c-b319-4221-a799-c17ea57f976&title=&width=17.866668701171875"  height="20px" /> ，可以在窗口区查看对应的动力学模型基本信息、相位分析等信息。

![image.png](https://cdn.nlark.com/yuque/0/2023/png/21489474/1700212624915-633354b0-ca7c-45e4-bef6-75f746ac87ae.png#averageHue=%23272626&clientId=ua9419262-3734-4&from=paste&height=600&id=ue917a799&originHeight=1125&originWidth=1725&originalType=binary&ratio=1.875&rotation=0&showTitle=false&size=155194&status=done&style=none&taskId=u31aa68a6-aa0c-43d9-a4db-4a393dccd9a&title=&width=920)
<a name="kY28n"></a>
通过导航栏New->New Dynamic Model，可以进入创建动力学模型界面，填写完表单中的信息即可创建一个新的动力学模型。
![image.png](https://cdn.nlark.com/yuque/0/2024/png/21489474/1706520601820-5e7789f6-f07b-499a-b990-c6b6d0b2e8c0.png#averageHue=%23272727&clientId=uea5ce4bf-3ba1-4&from=paste&height=594&id=u6e45d238&originHeight=1114&originWidth=1717&originalType=binary&ratio=1.875&rotation=0&showTitle=false&size=117003&status=done&style=none&taskId=u4568e523-df26-4e4e-a821-8a5709c22a4&title=&width=915.7333333333333)
或者您也可以右键点击一个现有的动力学模型，进行copy操作。以此为基础修改其各项参数来创建一个新的动力学模型。同样的右键操作还能够删除一个现有的动力学模型。
![image.png](https://cdn.nlark.com/yuque/0/2024/png/21489474/1706520663786-a5f20a13-4f71-4e16-be45-6413b99ce86c.png#averageHue=%232a2a2a&clientId=uea5ce4bf-3ba1-4&from=paste&height=595&id=u331473b0&originHeight=1115&originWidth=1719&originalType=binary&ratio=1.875&rotation=0&showTitle=false&size=163924&status=done&style=none&taskId=u9d0b1423-99f0-4a29-a989-a59621a6cfe&title=&width=916.8)

### 作业管理页面
在打开工作空间的情况下，通过点击导航栏 <img src="https://cdn.nlark.com/yuque/0/2023/png/21489474/1700445427856-ca35aaf3-b9c2-4be7-8b1f-f4555d311674.png#averageHue=%232f2f2f&clientId=ue8dab574-33a7-4&from=paste&height=22&id=u4fdb70a0&originHeight=41&originWidth=42&originalType=binary&ratio=1.875&rotation=0&showTitle=false&size=847&status=done&style=none&taskId=uea822770-bfa6-404b-b760-0d9514356a9&title=&width=22.4"  height="20px" />按钮，进入到作业管理页面。作业管理提供了 <img src="https://cdn.nlark.com/yuque/0/2023/png/21489474/1700445376667-f04a8917-5aa9-4781-83e5-44739b9e0e8a.png#averageHue=%2332302f&clientId=ue8dab574-33a7-4&from=paste&height=22&id=u42a07e14&originHeight=41&originWidth=125&originalType=binary&ratio=1.875&rotation=0&showTitle=false&size=915&status=done&style=none&taskId=uf94d497c-b741-41d6-b237-888add31c6e&title=&width=66.66666666666667"  height="20px" />  “Job List和 <img src="https://cdn.nlark.com/yuque/0/2023/png/21489474/1700445393998-53aae4cc-b1bb-4273-bdd1-8b7a13fe5521.png#averageHue=%23343230&clientId=ue8dab574-33a7-4&from=paste&height=22&id=u8d8901c9&originHeight=42&originWidth=211&originalType=binary&ratio=1.875&rotation=0&showTitle=false&size=2351&status=done&style=none&taskId=u433b3115-deca-447d-9d48-a7432d33d10&title=&width=112.53333333333333"  height="20px" /> “Worker Manager”两个目录菜单。点击不同的菜单项，进入不同的页面窗口。

- 在“Job List”的窗口中，您能通过列表查看到您工作空间内所有的模拟作业信息，并可以通过作业状态进行筛选显示。点击列表中的条目，会弹窗显示该作业的详细信息。

![image.png](https://cdn.nlark.com/yuque/0/2023/png/21489474/1700212682903-c6f06ee9-31d8-4b90-a5e4-8bc75eb54dcf.png#averageHue=%23232322&clientId=ua9419262-3734-4&from=paste&height=600&id=u235182d7&originHeight=1125&originWidth=1725&originalType=binary&ratio=1.875&rotation=0&showTitle=false&size=108638&status=done&style=none&taskId=u361de655-cb73-4615-803a-fff08ff1bd6&title=&width=920)<br />![image.png](https://cdn.nlark.com/yuque/0/2023/png/21489474/1700445842557-a9af606d-bc09-40e0-ac39-909b65921b7d.png#averageHue=%23242323&clientId=ue8dab574-33a7-4&from=paste&height=600&id=u71925502&originHeight=1125&originWidth=1725&originalType=binary&ratio=1.875&rotation=0&showTitle=false&size=119771&status=done&style=none&taskId=u719f3000-ad9f-4d22-951b-4927f118b4f&title=&width=920)

- 在“ Worker Manager”的窗口中，您可以查看到用于模拟作业的进程信息，每一个Worker卡片表示一个进程。您可以根据您模拟作业的规模，选择批量新增或者删除Worker，上限为您使用的计算机核数。

![image.png](https://cdn.nlark.com/yuque/0/2023/png/21489474/1700212725969-06839621-c313-411d-9f4c-0c344d7a9367.png#averageHue=%23242424&clientId=ua9419262-3734-4&from=paste&height=600&id=uf65bbb28&originHeight=1125&originWidth=1725&originalType=binary&ratio=1.875&rotation=0&showTitle=false&size=108896&status=done&style=none&taskId=u92f620d8-26dd-48f4-834b-34a1679e6fb&title=&width=920)
<a name="qep5E"></a>
###  设置页面
通过点击导航栏底部的 <img src="https://cdn.nlark.com/yuque/0/2023/png/21489474/1700446981240-5040010d-4b38-4a7b-935c-546eedc8829d.png#averageHue=%23343434&clientId=ue8dab574-33a7-4&from=paste&height=22&id=u78b08ba0&originHeight=42&originWidth=41&originalType=binary&ratio=1.875&rotation=0&showTitle=false&size=1017&status=done&style=none&taskId=u05ee8110-2036-4ea3-8184-f03cb3e2d88&title=&width=21.866666666666667"  height="20px" />  按钮，进入到平台设置页面。在这里您可以个性化的定制平台的界面。

- “Mica effect”：若您的电脑为Windows11系统，可打开该功能，体验平台界面的毛玻璃特效。
- “Application theme”：您可以根据喜好，在这里设置平台的明、暗主题。
- “Theme color”：在这里您可以选择您喜欢的颜色，作为平台主题色。

![image.png](https://cdn.nlark.com/yuque/0/2023/png/21489474/1700212750436-0caf3d30-3722-4f3e-a587-8b78aca1e12a.png#averageHue=%23292929&clientId=ua9419262-3734-4&from=paste&height=600&id=u4e7df8ed&originHeight=1125&originWidth=1725&originalType=binary&ratio=1.875&rotation=0&showTitle=false&size=87080&status=done&style=none&taskId=u73234700-58e1-4bf3-bc5d-1c901593c3d&title=&width=920)
<a name="WvV2p"></a>
### 内置Jupyter
如果您想要通过自己编码实现平台未覆盖的功能，可以点击标题栏的“Jupyter”按钮，进入Jupyter解释器页面，在这里实现代码的编写、调试。

![image.png](https://cdn.nlark.com/yuque/0/2023/png/21489474/1700462936660-ca48669d-4160-4ba8-abd9-b146fb2e305b.png#averageHue=%232c2c2c&clientId=ubb61447e-ed9c-4&from=paste&height=597&id=e4b1H&originHeight=1125&originWidth=1725&originalType=binary&ratio=1.875&rotation=0&showTitle=false&size=111162&status=done&style=none&taskId=u3e37fc43-1c14-443d-99d4-db01a102744&title=&width=916)
<a name="CfK06"></a>
## 数字孪生脑建模仿真
<a name="mnqCp"></a>
### 目标
假设你已经对ZJB平台的各个组件有了一定的了解，你可以通过此部分熟悉如何通过ZJB平台来完成一个基本的建模流程.<br />如果这是你第一次使用ZJB平台，请移步[平台概览](#h1LuJ)部分的文档.
<a name="qoe8Y"></a>
### 创建一个“数字孪生脑”（dtb）
![c9a5ba545204b55d02459976fa4e1c9.png](https://cdn.nlark.com/yuque/0/2023/png/1044341/1700199473763-a1675e3b-32cf-469a-9365-70929c8dc8f5.png#averageHue=%2312110a&clientId=u80ef789b-7c7b-4&from=paste&height=261&id=udd4ae3f6&originHeight=391&originWidth=1256&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=295210&status=done&style=none&taskId=u22507da7-fcd3-4894-b9f9-5e2e1704253&title=&width=837.3333333333334)

- 一个数字孪生脑（dtb）指的是由真实大脑信息所约束的数字化大脑. 如图所示，在平台中其主要由数字孪生脑模型（dtb model），被试（subject），及选择的适合的连接信息构成.
- 一个被试表示真实大脑所属的个体，在平台中, 被试用于保存个体信息以及大脑相关的数据等, 如由DTI纤维追踪得到的结构连接矩阵, 来自fMRI的BOLD信号及功能连接, 受体密度分布, 重建的皮层结构等.
- 数字孪生脑模型由图谱（atlas）及节点动力学模型（dynamics model）构成，分别表示大脑的生物分区与各个节点随时间演化的动力学信息.
- 连接信息是数字孪生脑的结构基础, 定义了数字孪生脑中各个脑区之间的连接强度.
<a name="GLuAQ"></a>
#### 创建/选择 项目
工作空间中保存了不同的项目，在创建“数字孪生脑”之前，我们需要先选择一个存放它的项目.<br />默认的工作空间中已经有了一个示例项目“default”，我们可以选择在它里面进行研究与实验，当然我们也可以[创建属于自己的研究项目（详见示例）.](#EYdSb)
<a name="f4T1u"></a>
#### 创建/查看 被试
被试指真实大脑所属的个体. 在ZJB平台中, 被试用于保存个体信息以及大脑相关的数据等, 如由DTI纤维追踪得到的结构连接矩阵, 来自fMRI的BOLD信号及功能连接, 受体密度分布, 重建的皮层结构等.<br />在研究中，往往需要向项目中导入一个或多个被试。默认的工作空间中已经有了一些示例被试，我们可以查看它的信息，当然我们也可以[创建新的被试（详见示例）.](#dGfIz)

![image.png](https://cdn.nlark.com/yuque/0/2023/png/1044341/1700211216852-fcb5386c-3452-43d5-ba9b-3973c248821a.png#averageHue=%23222222&clientId=u5f487ac0-86a7-4&from=paste&height=1115&id=ud59d8e19&originHeight=1394&originWidth=2554&originalType=binary&ratio=1&rotation=0&showTitle=false&size=136593&status=done&style=none&taskId=u3ae538b3-fc92-4014-95df-122db6a9602&title=&width=2043.2)<br />平台中，被试页面主要包含以下信息：

- 被试名.
- 被试具体描述.
- 被试中包含的数据，如结构连接、经验功能连接、皮层数据等.
<a name="tMDAF"></a>
#### 创建/设置 数字孪生脑模型
项目中包含了此项目内所使用到的数字孪生脑模型.<br />示例的项目中已经有了一个示例数字孪生脑模型“test_model”，是由BNA图谱及动力学模型ReducedWongWangExcInh所构成的，我们可以在它的基础上配置仿真参数信息，当然我们也可以[创建新的数字孪生脑模型（详见示例）.](#Afii4)

![image.png](https://cdn.nlark.com/yuque/0/2024/png/1044341/1707275566539-78e35182-8127-4c26-bb18-909426a804dc.png?x-oss-process=image%2Fresize%2Cw_937%2Climit_0)<br />平台中，数字孪生脑模型页面主要包含以下部分内容:

- 数字孪生脑模型的名字.
- 数字孪生脑模型所使用的图谱.
- 数字孪生脑模型所使用的动力学模型.
- 数字孪生脑模型的动力学信息，包括变量、参数等，我们可以在此设置变量初值及非默认的动力学参数. 进一步地，我们也可以设置脑区异质性的参数或使用与被试数据关联的参数，同时，我们也可以在这里[对数字孪生脑模型设置刺激](#DYEut)
- 仿真配置信息  
![image.png](https://cdn.nlark.com/yuque/0/2023/png/1044341/1700202715732-098c4898-b4fb-4f65-8ac9-d2482392294e.png#averageHue=%23292828&clientId=u80ef789b-7c7b-4&from=paste&height=367&id=u9a972ca7&originHeight=367&originWidth=2224&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=27303&status=done&style=none&taskId=uef805e80-a824-4dba-9c14-51892d5a3d1&title=&width=2224)
   - 我们可以选择不同的微分方程求解器类型，并设置噪声，默认会使用时间步长为0.1(单位取决于动力学模型本身)的欧拉法求解器.![image.png](https://cdn.nlark.com/yuque/0/2023/png/1044341/1700202882551-d1c7512f-dabf-400c-95b6-a1fb68df1a07.png#averageHue=%232c2c2c&clientId=u80ef789b-7c7b-4&from=paste&height=171&id=u68e06247&originHeight=171&originWidth=777&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=7209&status=done&style=none&taskId=u90204de9-41fe-4cb0-a4e0-a9d2a5ac663&title=&width=777)
   - 添加一个或多个监测器，并设置所观测物理量. 其中`Raw`监测器在每一个时间步进行采样后输出结果; `SubSample`监测器在固定间隔的时间步离散采样并输出结果; `TemporalAverage`在固定间隔的时间步内连续采样并将间隔内的结果平均后输出; `BOLD`监测器在每个时间步进行采样, 将其作为血氧气球模型的输入, 然后在固定间隔的时间步采样血氧气球模型的结果作为输出.![image.png](https://cdn.nlark.com/yuque/0/2023/png/1044341/1700203102165-b1aa50d6-04e4-4907-bda4-d213f02ecef1.png#averageHue=%232a2929&clientId=u80ef789b-7c7b-4&from=paste&height=291&id=uf606bfa9&originHeight=291&originWidth=789&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=13003&status=done&style=none&taskId=u989942cf-3cea-4038-9930-18dd40f8cff&title=&width=789)
   - 设置仿真时长.
<a name="xYY0z"></a>
#### 创建/使用 数字孪生脑
项目中包含了此项目内所使用到的数字孪生脑.<br />默认的示例项目中已经有了一个示例数字孪生脑“test_dtb”，是由示例被试“test_sub”、示例数字孪生脑模型“test_model”及结构连接构成。我们可以选择对它进行仿真实验，当然我们也可以[创建新的数字孪生脑（详见示例）.](#NjbsX)

![image.png](https://cdn.nlark.com/yuque/0/2023/png/1044341/1700208405860-9d275077-b25c-4a5a-b209-ffa49d6a2d0d.png#averageHue=%23222222&clientId=u5f487ac0-86a7-4&from=paste&height=1118&id=ue8094769&originHeight=1398&originWidth=2568&originalType=binary&ratio=1&rotation=0&showTitle=false&size=138765&status=done&style=none&taskId=uc16cfc02-ccf5-40e9-b541-b1b1f9f0da5&title=&width=2054.4)<br />平台中，数字孪生脑页面主要包含以下部分内容：

- 数字孪生脑名字.
- 数字孪生脑所包含的被试、数字孪生脑模型及连接信息.
- 仿真、仿真参数探索（PSE）功能按钮.
- 数字孪生脑中包含的仿真结果数据. 此处，示例数字孪生脑中已经包含了一个基础仿真结果及PSE仿真结果，我们可以查看仿真结果并进行分析.

运行基本的数字孪生脑仿真：

- 点击数字孪生脑页面中的“Simulate”按钮，并对此次仿真进行命名。  

![image.png](https://cdn.nlark.com/yuque/0/2023/png/1044341/1700212044134-df087fdd-b5ab-4e1e-bfb6-76b62945fb9d.png#averageHue=%232b2a2a&clientId=u5f487ac0-86a7-4&from=paste&height=338&id=u0efbf292&originHeight=422&originWidth=444&originalType=binary&ratio=1&rotation=0&showTitle=false&size=12543&status=done&style=none&taskId=uc25bebac-48b6-47d7-b58e-b74da7649b1&title=&width=355.2)
- 点击"ADD"按钮，添加监控动态参数（可选）。      

  ![image.png](https://cdn.nlark.com/yuque/0/2023/png/1044341/1700212356957-9f4f6b59-11f7-42bb-b583-ee52381cfb9f.png#averageHue=%2320201f&clientId=u5f487ac0-86a7-4&from=paste&height=342&id=DDs7i&originHeight=428&originWidth=443&originalType=binary&ratio=1&rotation=0&showTitle=false&size=16603&status=done&style=none&taskId=u829ea245-3237-45d9-9d6e-3eefb4a5958&title=&width=354.4)![image.png](https://cdn.nlark.com/yuque/0/2023/png/1044341/1700212368969-f1a21e13-d7dc-4610-812f-4f3d27670486.png#averageHue=%232b2a2a&clientId=u5f487ac0-86a7-4&from=paste&height=334&id=s3ZJu&originHeight=418&originWidth=441&originalType=binary&ratio=1&rotation=0&showTitle=false&size=13330&status=done&style=none&taskId=ua51aa3ab-90cc-4041-828d-ba9e336c21c&title=&width=352.8)

- 点击“OK”按钮，执行仿真.

运行仿真参数探索：

- 点击数字孪生脑页面中的“PSE”按钮，并对此次参数探索进行命名. 点击“ADD”按钮并添加所要探索的参数及范围，更多参数输入格式可参考[高效便捷的参数输入（详见示例）](#T07PZ)：  

![image.png](https://cdn.nlark.com/yuque/0/2023/png/1044341/1700212736939-6fa84bce-064c-4a45-90ef-e3a3696d57e5.png#averageHue=%232c2b2b&clientId=u5f487ac0-86a7-4&from=paste&height=342&id=u931e3044&originHeight=427&originWidth=414&originalType=binary&ratio=1&rotation=0&showTitle=false&size=12704&status=done&style=none&taskId=uecc98a42-0c86-4463-935e-d9cf30498aa&title=&width=331.2)![image.png](https://cdn.nlark.com/yuque/0/2023/png/1044341/1700212871746-29ab18fd-8089-4efc-be13-ec5c18b7c5e4.png#averageHue=%232c2c2c&clientId=u5f487ac0-86a7-4&from=paste&height=342&id=u89c7b603&originHeight=419&originWidth=417&originalType=binary&ratio=1&rotation=0&showTitle=false&size=14817&status=done&style=none&taskId=u801ed3ca-9bf9-47bf-83c1-903804383d1&title=&width=340.6000061035156)
- 点击"OK"按钮，执行仿真

至此，一个具有真实大脑结构约束和ReducedWongWangExcInh动力学的数字孪生脑便已经仿真得到了数字孪生脑的模拟活动. 
<a name="P8dvF"></a>
### 查看/分析 仿真结果
数字孪生脑仿真任务（包括参数探索仿真）的结果会被存放在所仿真的数字孪生脑中，点击仿真结果即可对其中的仿真结果进行可视化或分析：  
![image.png](https://cdn.nlark.com/yuque/0/2024/png/1044341/1706080760966-9793828e-871c-4b32-b364-26410bd7886b.png)
![image.png](https://cdn.nlark.com/yuque/0/2024/png/1044341/1706080768763-23f0f569-6592-4460-963e-5e6e4e4adcb7.png)
<a name="uVySn"></a>
#### 查看仿真结果

- 点击"Visualization"，进行仿真结果时间序列的可视化页面.    

![image.png](https://cdn.nlark.com/yuque/0/2023/png/1044341/1700213817843-1236f2a2-4ebe-4f38-ad04-85a04690b550.png#averageHue=%23696868&clientId=u5f487ac0-86a7-4&from=paste&height=1114&id=ue7d10943&originHeight=1393&originWidth=2559&originalType=binary&ratio=1&rotation=0&showTitle=false&size=1216907&status=done&style=none&taskId=u347513fc-43ff-4317-ab53-a927d663928&title=&width=2047.2)
- 此页面展示了时间序列的可视化. 左侧表明大脑皮层不同区域中特定时间活动强度，右侧为所选脑区时间序列的平铺展示. 其中，点击![image.png](https://cdn.nlark.com/yuque/0/2023/png/1044341/1700213716240-4a611ca4-553e-4b79-9a10-8cca08597520.png#averageHue=%23259e59&clientId=u5f487ac0-86a7-4&from=paste&height=34&id=udf82a380&originHeight=43&originWidth=64&originalType=binary&ratio=1&rotation=0&showTitle=false&size=696&status=done&style=none&taskId=uf3cfa058-5be4-4d7d-baaa-9ea1fab1c10&title=&width=51.2)按钮可启动动态时间序列可视化，并通过速度轴![image.png](https://cdn.nlark.com/yuque/0/2023/png/1044341/1700213862516-445fffca-8e41-4bd8-b143-19eca0243460.png#averageHue=%232d2d2c&clientId=u5f487ac0-86a7-4&from=paste&height=22&id=ubcf1b0b3&originHeight=28&originWidth=263&originalType=binary&ratio=1&rotation=0&showTitle=false&size=1275&status=done&style=none&taskId=uaed0fff9-9797-4db6-97fc-d642541d67e&title=&width=210.4)改变时间遍历的速度，也可以点击下方时间轴定位到具体时刻的活动水平. 也可以在上方改变展示的ColorBar![image.png](https://cdn.nlark.com/yuque/0/2023/png/1044341/1700213966266-12523b06-4114-4151-b047-488b51074be3.png#averageHue=%23252524&clientId=u5f487ac0-86a7-4&from=paste&height=43&id=uf1e6eb5b&originHeight=54&originWidth=463&originalType=binary&ratio=1&rotation=0&showTitle=false&size=3195&status=done&style=none&taskId=uf12c84f0-e4b2-462e-8238-0b911fd28fa&title=&width=370.4).
<a name="cGSet"></a>
#### 分析仿真结果

- 点击“Analysis”，进行仿真结果的分析. 面板中包含现有对该仿真进行过的分析，点击可对现有分析进行查看，面板中也包含创建新的分析"New Analysis"按钮，点击可创建对该仿真数据新的分析.   

![image.png](https://cdn.nlark.com/yuque/0/2024/png/1044341/1706088548525-dd7c2990-6960-4ad8-874f-ee1093bb727e.png)
- 点击"New Analysis"按钮，进入"新分析"页面.   

![image.png](https://cdn.nlark.com/yuque/0/2023/png/1044341/1700214428881-476ffda0-b17d-4eff-abbf-ca2a5031db89.png#averageHue=%23212121&clientId=u5f487ac0-86a7-4&from=paste&height=1118&id=u9bec5ab8&originHeight=1397&originWidth=2556&originalType=binary&ratio=1&rotation=0&showTitle=false&size=139051&status=done&style=none&taskId=u17c7362f-e5db-4e7a-8b25-187c6eea2e1&title=&width=2044.8)
- 分析页中包含了被分析对象的简要属性信息
- 点击![image.png](https://cdn.nlark.com/yuque/0/2023/png/1044341/1700443128997-4f6cccc3-3edf-4687-9295-3250bccf03c7.png#averageHue=%23aeaa6f&clientId=ucdf3ee29-3e56-4&from=paste&height=48&id=u070b462f&originHeight=60&originWidth=459&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=4613&status=done&style=none&taskId=u341b308a-caa6-4361-8155-b43c02634a8&title=&width=367.2)添加新的分析步骤（可多次添加多个分析），选择分析方法，如此处我们使用自相关的方法对仿真结果的时间序列提取连接信息点击“Run Analysis”执行分析：  

![image.png](https://cdn.nlark.com/yuque/0/2024/png/1044341/1706150400177-437bcfb4-1d72-4169-8bd8-e1945f737cea.png?x-oss-process=image%2Fresize%2Cw_1125%2Climit_0)
- 此处，我们得到了相应的连接矩阵，点击“Advanced Visualization”进入连接矩阵的可视化界面，其关联图谱为被分析数据所在的空间所绑定的图谱.  

![image.png](https://cdn.nlark.com/yuque/0/2023/png/1044341/1700443588800-5eeeb80b-70e4-403a-bd34-2b5aa8e58a66.png#averageHue=%23a0d33a&clientId=ucdf3ee29-3e56-4&from=paste&height=1116&id=u9cfc28b6&originHeight=1395&originWidth=2568&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=780067&status=done&style=none&taskId=uf20ae382-7a02-44b5-bee2-b676a63f306&title=&width=2054.4)<br />选择不同的脑区后，可展示所选脑区间的相关性矩阵，同时也会展示其中权重前25的弦图.
- 回到分析结果，点击"Save analysis result"将分析的结果保存到用户指定的dtb或subject中，并对分析结果进行命名.

![image.png](https://cdn.nlark.com/yuque/0/2024/png/1044341/1706150538570-0242d920-3c6a-46cc-86a7-9cd55494e90e.png?x-oss-process=image%2Fresize%2Cw_1125%2Climit_0)
![image.png](https://cdn.nlark.com/yuque/0/2024/png/1044341/1706150879855-f8e5f1ce-6b6f-496e-aa1f-dae4382bdcc5.png)
- 多实体分析. 有的分析方法需要引入多个数据，比如对两组数据进行相关性分析时，我们选择“pearson_correlation”：

![image.png](https://cdn.nlark.com/yuque/0/2024/png/1044341/1706151596223-256835b1-8c67-45e7-b812-a28616e35089.png)
此时我们可以看到需要选择两组数据，默认为目前的待分析数据. 比如此时我们想计算当前数据与另一个时间序列的相关性，我们便需要导入一个新的数据，如选择此处array_2的Load按钮
![image.png](https://cdn.nlark.com/yuque/0/2024/png/1044341/1706151798738-4a639749-499f-439b-8f6e-9d7a8cef459d.png)
![image.png](https://cdn.nlark.com/yuque/0/2024/png/1044341/1706151809474-ee60eac2-a54a-4908-b64f-5bd2e76aad32.png)
所弹出的数据选择对话框需要我们从中一层一层地选取所期望的数据，并进行选择，如此我们便完成了多实体分析下的数据选择，其余流程则和常规分析一致
![image.png](https://cdn.nlark.com/yuque/0/2024/png/1044341/1706151856653-0ce4d11c-cd02-446e-8b9b-cffcb658519b.png)

<a name="Ttr39"></a>
#### 查看分析结果
在数据中，点击“Analysis”，进行仿真结果的分析. 面板中包含现有对该仿真进行过的分析，点击可对该数据已有的分析进行查看，如上文中我们已经对仿真的时间序列结果提取了仿真的功能连接，此处展示如何对它查看并进行后续分析

- 此处，我们可以对该分析结果进行查看，包含该分析结果的“源信息”（即是由哪一个或哪几个实体所进行的分析）

![image.png](https://cdn.nlark.com/yuque/0/2023/png/1044341/1700444958142-d2e8919f-0d49-4e3d-a247-0d8a355fffad.png#averageHue=%23252525&clientId=ucdf3ee29-3e56-4&from=paste&height=494&id=ud294d9c3&originHeight=618&originWidth=2184&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=64552&status=done&style=none&taskId=uc6193d43-8a97-4a75-b61e-9618395513f&title=&width=1747.2)
- 同时，我们可以对此结果进行进一步的分析，添加一个分析并选择皮尔森相关性分析，此处矩阵默认为该分析结果本身，如果我们不读取新的数据直接进行分析，其结果为1。

<a name="sQaRs"></a>
# 示例
<a name="EYdSb"></a>
## 创建一个新的研究项目
在平台中，有以下两个方式可以创建一个新的研究项目：

- 点击上方菜单中"New"按钮，选择新建"Project".  
![image.png](https://cdn.nlark.com/yuque/0/2023/png/1044341/1700445513744-b4239f3d-4938-437b-9a61-7d9c939a43d4.png#averageHue=%23242423&clientId=ucdf3ee29-3e56-4&from=paste&height=244&id=ub0faa705&originHeight=305&originWidth=543&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=19368&status=done&style=none&taskId=ue3cff4b5-0b22-4660-ba65-2f5a8d479c0&title=&width=434.4)![image.png](https://cdn.nlark.com/yuque/0/2023/png/1044341/1700445543589-13ab21ea-150d-4a06-a8a2-55d6f3afc911.png#averageHue=%23302e2d&clientId=ucdf3ee29-3e56-4&from=paste&height=245&id=u18a2523d&originHeight=190&originWidth=194&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=7904&status=done&style=none&taskId=u34e516e8-d7ea-490d-a15a-428019b3e27&title=&width=250.1999969482422)<br />命名并选择项目挂载的“工作空间”及“项目”即可. 这样的设计在于，实践中在项目里往往存在不同的子项目，因此平台设计了项目的附属机制.    
![image.png](https://cdn.nlark.com/yuque/0/2023/png/1044341/1700445690762-ce3b5639-6c72-444b-9296-40c859db0a26.png#averageHue=%23302f2e&clientId=ucdf3ee29-3e56-4&from=paste&height=246&id=ud464aacf&originHeight=307&originWidth=377&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=18019&status=done&style=none&taskId=u79a0de97-1dc2-4d6e-8481-c5c67ed0ead&title=&width=301.6)
- 另一个创建研究项目的方法是直接在工作空间目录中，在期望的工作空间/项目名上点击右键，选择新增项目.   
![image.png](https://cdn.nlark.com/yuque/0/2023/png/1044341/1700445894863-cdc8fe5d-9f03-406e-9402-3b99e6b827d6.png#averageHue=%232e2d2c&clientId=ucdf3ee29-3e56-4&from=paste&height=191&id=u3172309e&originHeight=239&originWidth=278&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=12599&status=done&style=none&taskId=u755721f8-0a0d-4347-a6cf-b308206b4e2&title=&width=222.4)
<a name="dGfIz"></a>
## 创建新的被试
与研究项目的创建类似，我们可以通过点击"New Subject"进入被试的创建页面。<br />命名并选择被试挂载的项目  

![image.png](https://cdn.nlark.com/yuque/0/2023/png/1044341/1700446543565-e6e9dd5e-ef12-47e2-b40f-a8fe092da995.png#averageHue=%232e2d2d&clientId=ucdf3ee29-3e56-4&from=paste&height=246&id=u38f355ee&originHeight=307&originWidth=374&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=12893&status=done&style=none&taskId=u0a5d060f-7825-422b-968a-7b80d6de76f&title=&width=299.2)<br />在被试页面中，可以导入相关的数据  

![image.png](https://cdn.nlark.com/yuque/0/2023/png/1044341/1700446655037-b02416c2-da6b-481d-8b4a-97ecad2b5127.png#averageHue=%23212121&clientId=ucdf3ee29-3e56-4&from=paste&height=403&id=ud5921d52&originHeight=504&originWidth=535&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=26098&status=done&style=none&taskId=u0d81bb20-eecb-4236-a7d9-dcd10737d7f&title=&width=428)
<a name="Afii4"></a>
## 创建新的数字孪生脑模型
类似地，我们可以在 工作空间/项目 中创建一个新的“DTB Model”，并设置相应的信息. 数字孪生脑模型由图谱及动力学模型构成，因此我们需要选择研究所要用到的图谱及动力学模型.  

![image.png](https://cdn.nlark.com/yuque/0/2023/png/1044341/1700446819866-73c51f4f-9b73-4ccd-ac24-2bccb99d5265.png#averageHue=%2332302e&clientId=ucdf3ee29-3e56-4&from=paste&height=330&id=u8e4d9770&originHeight=189&originWidth=169&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=7036&status=done&style=none&taskId=u3d5edfa3-3d1e-4184-9cef-e56265b9d92&title=&width=295.1999969482422)![image.png](https://cdn.nlark.com/yuque/0/2023/png/1044341/1700446868146-c5c6b9f8-cd4b-42ac-8688-033780e5af38.png#averageHue=%23302f2e&clientId=ucdf3ee29-3e56-4&from=paste&height=328&id=ud4229364&originHeight=410&originWidth=402&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=17605&status=done&style=none&taskId=uc002a9d6-3b7e-4792-8d5e-c3bcbed751f&title=&width=321.6)<br />随后可以在数字孪生脑模型中修改相关的参数信息
<a name="NjbsX"></a>
## 创建数字孪生脑
类似地，我们可以在 工作空间/项目 中创建一个新的“DTB”，并设置相应的信息. 数字孪生脑由数字孪生脑、被试、被试数据中的连接信息构成，选择合适的信息来创建一个数字孪生脑.  

![image.png](https://cdn.nlark.com/yuque/0/2023/png/1044341/1700447181981-decfab64-5a66-4c46-a276-03c21f8a71e8.png#averageHue=%23312f2e&clientId=ucdf3ee29-3e56-4&from=paste&height=363&id=u02cdefa2&originHeight=198&originWidth=172&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=7963&status=done&style=none&taskId=u15496267-2ce5-49f0-8d65-0c97cadd880&title=&width=315.6000061035156) ![image.png](https://cdn.nlark.com/yuque/0/2023/png/1044341/1700447212678-4f3e9d0f-51e4-432d-b2fa-43d35c896b2c.png#averageHue=%232f2f2e&clientId=ucdf3ee29-3e56-4&from=paste&height=364&id=u9258ddff&originHeight=455&originWidth=376&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=17681&status=done&style=none&taskId=u366dc41a-f47b-43ba-93ff-01a1e0bc39a&title=&width=300.8)
<a name="T07PZ"></a>
## 在数字孪生脑仿真中施加刺激
在数字孪生脑模型页面中，我们可以对他的参数值支持设置为刺激实例，从而实现数字孪生脑仿真中的刺激功能。
首先，我们需要在数字孪生脑模型页面中的参数部分点击“+Add stimulation”按钮，并进行一些设置：

- 点击按钮，呼出刺激的设置窗口![image.png](https://cdn.nlark.com/yuque/0/2024/png/1044341/1707276012127-0f60dfb7-d8c1-4f65-9886-067be2519dc1.png#averageHue=%232a2929&clientId=u471de447-f42e-4&from=paste&height=522&id=ua9a8c67c&originHeight=653&originWidth=812&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=39766&status=done&style=none&taskId=u9611cc57-2fe0-483b-abbe-e493861f6e1&title=&width=649.6)
- 在添加刺激的设置窗口中，选择期望施加刺激的类型以及对应的参数，目前我们内置了高斯刺激、单脉冲刺激、正弦刺激及N周期脉冲刺激，对应的参数分别有幅值、频率、起止点、循环周期次数（0为无限循环）等
![image.png](https://cdn.nlark.com/yuque/0/2024/png/1044341/1707276268291-6f0a76ee-e7de-4364-9702-1ffe4f74f366.png#averageHue=%232e2e2d&clientId=u471de447-f42e-4&from=paste&height=429&id=u4f714d3f&originHeight=536&originWidth=358&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=17619&status=done&style=none&taskId=ueb6cfd3b-c94c-4892-aa31-4262bf458a3&title=&width=286.4) ![image.png](https://cdn.nlark.com/yuque/0/2024/png/1044341/1707276286236-3be758d9-12f2-402a-bff6-961c047cfa75.png#averageHue=%2330302f&clientId=u471de447-f42e-4&from=paste&height=159&id=ucc9c8e2c&originHeight=199&originWidth=314&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=7135&status=done&style=none&taskId=u06580925-88ff-4e63-9f89-bb9bf15ef0a&title=&width=251.2)
- Space区域表示可以施加脑区异质性刺激，这是一个很有用的功能，我们点击右侧的“+”号，可以进入脑区异质性的刺激编辑页面。在异质性刺激编辑页面中，在脑区列表中进行选择，或在三维大脑中进行点击选取想要添加刺激的脑区，在右侧列表中进行刺激强度的输入，其中刺激强度可以输入-1到1的数值，结合之前设置窗口中的幅值会为脑区施加相应强度的刺激，最后点击“Create”按钮即可创建脑区异质性的刺激模板，显示在刺激设置面板的“Space”中

![image.png](https://cdn.nlark.com/yuque/0/2024/png/1044341/1707276495353-4cb84059-5533-4175-bea9-4562ee7255fa.png#averageHue=%232f2e2e&clientId=u471de447-f42e-4&from=paste&height=416&id=ue97ade57&originHeight=520&originWidth=350&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=17506&status=done&style=none&taskId=u9496a92f-bf3a-45bc-9d55-d2ebac9ae97&title=&width=280)![image.png](https://cdn.nlark.com/yuque/0/2024/png/1044341/1707276734516-bb35593c-dcbd-4157-895e-efd00af00a5d.png#averageHue=%23342f2d&clientId=u471de447-f42e-4&from=paste&height=1229&id=u73ad1eab&originHeight=1352&originWidth=2247&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=1320387&status=done&style=none&taskId=uf8e69dc7-2af2-4031-9d08-dc97eaf7178&title=&width=2042.7272284523524)![image.png](https://cdn.nlark.com/yuque/0/2024/png/1044341/1707285052688-0c17b9d3-bd27-4acc-b573-4175504dc056.png#averageHue=%232e2d2d&clientId=u471de447-f42e-4&from=paste&height=478&id=ua29ed930&originHeight=526&originWidth=355&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=18136&status=done&style=none&taskId=u6c6267b8-dead-4da7-b3d1-765b0005378&title=&width=322.72726573234763)
- 最后，选择合适的参数予以施加刺激，点击确认，便能将刺激的实例赋给对应参数。
![image.png](https://cdn.nlark.com/yuque/0/2024/png/1044341/1707285128411-9b8843dc-1db5-4870-8d8e-bf9b35e924a3.png#averageHue=%232b2b2a&clientId=u471de447-f42e-4&from=paste&height=946&id=u6c0cfb82&originHeight=1041&originWidth=976&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=58128&status=done&style=none&taskId=u507a5e04-9ff4-4be1-998f-bf1e32dffdf&title=&width=887.2727080416092)
- 如果需要产出该参数下的刺激，只需要在输入框中删除该实体，并设定固定值或初始值即可

最后，让我们看一下添加刺激后的数字孪生脑仿真结果：
![image.png](https://cdn.nlark.com/yuque/0/2024/png/1044341/1707285387378-51c0590c-7f46-4af6-8913-5dba776e2f23.png#averageHue=%237e7d7d&clientId=u471de447-f42e-4&from=paste&height=1168&id=u99c297dc&originHeight=1285&originWidth=2247&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=902041&status=done&style=none&taskId=uefea25e8-4c1e-47b9-b30a-51e3d3241d3&title=&width=2042.7272284523524)
动态三维时间序列和二维时间序列都表明，对相关脑区施加刺激后数字孪生脑发生了对应的活动响应
## 高效便捷的参数输入
参数输入中，如PSE仿真设置中，我们需要对不同的参数进行设置：

- 通常，我们可以用类似列表的方式对参数进行增加<br />![image.png](https://cdn.nlark.com/yuque/0/2023/png/1044341/1700447908027-132a5de9-5be8-4110-ab7b-469e57ac3fca.png#averageHue=%232c2c2c&clientId=ucdf3ee29-3e56-4&from=paste&height=338&id=u6beb900c&originHeight=423&originWidth=413&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=14834&status=done&style=none&taskId=ua7cbbad8-3bc0-43c5-bd4c-3ad57c37d16&title=&width=330.4)
- 当涉及到遍历大量数据时，比如对参数_b_e_进行120~150，间隔为1的参数设置时，便可以使用"linspace"语法<br />![image.png](https://cdn.nlark.com/yuque/0/2023/png/1044341/1700448238416-a4c45b88-628d-4eb3-9245-ef1db9c20b5b.png#averageHue=%232d2d2c&clientId=ucdf3ee29-3e56-4&from=paste&height=339&id=u30a86ebd&originHeight=424&originWidth=414&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=15088&status=done&style=none&taskId=uc65ce7f2-5bb9-44b9-a8d7-0e820194eed&title=&width=331.2)
<a name="ipECI"></a>
## 选择合适的动力学模型
节点动力学模型是仿真的基础，你需要选择一个合适的模型，并提供合适的参数。<br />对此，平台提供了动力学模型面板，涵盖了不同的动力学分析功能。节点分析模块中调用了BrainPy的相图分析及分岔分析的算法，我们对平台内的模型及使用平台创建的模型做了自动适配，从而兼容这部分功能.<br />在平台的左侧边栏中选择动力学模型，上方分别有模型信息、相图分析及分岔分析的功能入口，对于任一模型，我们可以同时打开多个相图分析及分岔分析页，修改其中的参数并对比不同的结果.  

![image.png](https://cdn.nlark.com/yuque/0/2023/png/1044341/1700448732307-d76d5e40-d3f7-4f22-baa2-299d1586570d.png#averageHue=%23252525&clientId=ucdf3ee29-3e56-4&from=paste&height=1108&id=u27fe8221&originHeight=1385&originWidth=2545&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=170288&status=done&style=none&taskId=u245ca577-d338-447b-8889-921a24b7403&title=&width=2036)

- 动力学模型信息展示页中，包含模型的微分方程信息、变量初值、参数值及参考文献  

![image.png](https://cdn.nlark.com/yuque/0/2023/png/1044341/1700449277288-d88f9a5e-e656-4f97-a3c0-abb60df311c3.png#averageHue=%23252525&clientId=ucdf3ee29-3e56-4&from=paste&height=1034&id=CyFUw&originHeight=1292&originWidth=1909&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=93954&status=done&style=none&taskId=u57e8d8fe-d13e-4cf8-8bb7-bf9fe5408f6&title=&width=1527.2)
- 相图分析中，
   1. 选择想要分析的状态变量，并设置范围与步长.
   2. 选择轨迹的初值与执行长度.
   3. 执行相图分析，展示相图分析的结果，如果有定点，便会给出定点坐标  

![f91e9974e3c3454d2cd0f3d42d040059.png](https://cdn.nlark.com/yuque/0/2023/png/1044341/1700450308496-a9fb5bcc-3f10-4be0-bb85-aa1e716e2f87.png#averageHue=%23585857&clientId=ucdf3ee29-3e56-4&from=paste&height=750&id=xxbmH&originHeight=937&originWidth=1437&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=141109&status=done&style=none&taskId=uf7e86b43-f376-475f-8f65-84d5c27ecb9&title=&width=1149.6)
- 分岔分析中，
   1. 选择状态变量并设置范围.
   2. 选择想要进行分岔分析的参数并设置范围与步长.
   3. 执行分岔分析，分岔分析的结果会展示在下方，此时拖动图像中的坐标轴进行旋转，从而可以全方位地观察到不同参数下定点的状态.    

![9271d8ea55c3f638bd65f7664ce559c4.png](https://cdn.nlark.com/yuque/0/2023/png/1044341/1700450536683-1c2c1df6-e18e-4ff2-a953-f9a7f7f85014.png#averageHue=%23595858&clientId=ucdf3ee29-3e56-4&from=paste&height=750&id=u93b697a6&originHeight=937&originWidth=1437&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=174473&status=done&style=none&taskId=ud993a693-126f-4160-b454-a04d3bf69ab&title=&width=1149.6)
<a name="hXPx4"></a>
## 添加新的数据分析方法
数据分析是一个很广泛的功能，不同的数据类型具备非常多的分析方法，研究者对不同的数据往往具有不同的分析需求。可以发现我们并没有在平台中直接纳入非常多的分析方法，与之替代地，我们设计了一套便利的分析框架，使用者可以用非常少量的代码便捷地将所设计的分析方法添加至平台中，并可以自动化地展现在GUI内：<br />首先，在python环境地程序包目录下找到"zjb"库中分析模块的路径（通常是环境路径+"Lib\site-packages\zjb\main\analysis"）中的custom.py文件，并根据提示及示例编写自己的分析方法
```python
"""
此文件用于使用者添加自己的分析方法
1. 在此文件中以函数的形式编写分析方法，参变量需要包含名称及类型，
如果函数中包含参数，需要提供初始值，GUI中，初始值会以默认值的形式体现，
未提供初始值将会在GUI中以被分析对象的数据属性为初始值，并提供“load”按钮
2. 在同级菜单的“__init__.py”文件中暴露该函数接口即可
"""
import numpy as np


# 以下是示例
def array_sum(
    array_1: np.ndarray,
    array_2: np.ndarray,
    weight_1: float = 0.5,
    weight_2: float = 0.5,
):
    """自定义分析示例, 计算两个矩阵加权之和, 默认权重为0.5"""

    result = array_1 * weight_1 + array_2 * weight_2
    return result

```
其次，在分析模块中的“__init__.py”文件中暴露该函数接口，如：<br />

![image.png](https://cdn.nlark.com/yuque/0/2023/png/1044341/1700460352323-5f4bc4e8-13b1-439a-92e9-32649af4db29.png#averageHue=%2377683f&clientId=ucdf3ee29-3e56-4&from=paste&height=374&id=u8f94fe28&originHeight=468&originWidth=524&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=40683&status=done&style=none&taskId=u41b15bca-bd85-4d1b-a6bc-113fd005896&title=&width=419.2)<br />即可完成对自定义分析方法的添加。<br />我们来看看GUI中会发生什么：<br />此时当我们选择一个矩阵数据并进行分析，如某一仿真结果提取的功能连接，在分析方法的选择中便会出现所添加的“array_sun”方法：  

![image.png](https://cdn.nlark.com/yuque/0/2023/png/1044341/1700460512529-1a29d5ea-e21a-4538-8d59-138e95d37776.png#averageHue=%23272626&clientId=ucdf3ee29-3e56-4&from=paste&height=720&id=u6097b9be&originHeight=900&originWidth=2249&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=82867&status=done&style=none&taskId=ue44be8f1-0ac6-43be-942e-0eeccaf5930&title=&width=1799.2)<br />其中，权重weight_1及weight_2分别表示了两个相加矩阵的权重，可以进行修改，两个矩阵默认为当前分析数据的data属性，点击“load”可以导入项目中已有数据，比如此处我们导入另一功能连接矩阵并运行分析：  

![image.png](https://cdn.nlark.com/yuque/0/2023/png/1044341/1700460748517-48aea179-445f-41b4-82ef-b116568bf4d7.png#averageHue=%23616160&clientId=ucdf3ee29-3e56-4&from=paste&height=526&id=ub4886b46&originHeight=658&originWidth=1304&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=180144&status=done&style=none&taskId=ua108dcc6-9536-4e45-b2cf-665257c364e&title=&width=1043.2)<br />如此便成功实现了自定义分析方法的添加！

## 生成并查看仿真的电生理数据
在分析方法中， 我们内置了基于mne库的仿真电生理信号的方法，其本质为对本平台所仿真的神经活动数据通过mne的mne.simulation.simulate_raw方法，根据提供的前导矩阵等信息仿真用户期望的eeg、meg的传感器空间的数据，并可对所得到的数据进一步地进行可视化等处理. 

**生成仿真的电生理数据**

对仿真结果中的时间序列进行分析时，分析方法中，我们选择“create_mne_signals”便能够进行电生理数据的生成流程：
![image.png](https://cdn.nlark.com/yuque/0/2024/png/1044341/1706162968837-61ca89c7-8f94-48a6-be39-2438efbc12e8.png#averageHue=%23353535&clientId=u1f7c5e9b-4d12-4&from=paste&height=417&id=u87438277&originHeight=625&originWidth=1347&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=51175&status=done&style=none&taskId=uc0c5cf0e-69bd-4bc0-9f3e-faac12dc4ec&title=&width=898)
从平台内导入映射数据，并导入本地mne正向解文件（或源空间文件及边界元模型文件）及mne的传感器空间数据文件，设置合适的参数后，便可以执行并生成仿真的电生理数据，仿真的电生理数据可以被保存到数字孪生脑中，并进行进一步的查看。

**查看仿真的电生理数据**

点击数字孪生脑中的仿真电生理数据结果进行查看：
![image.png](https://cdn.nlark.com/yuque/0/2024/png/1044341/1706165117571-0063c931-d577-4900-968d-879cbf4f1d92.png#averageHue=%23212121&clientId=u1f7c5e9b-4d12-4&from=paste&height=342&id=uadc4b77b&originHeight=428&originWidth=1406&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=26453&status=done&style=none&taskId=ufaf9e9f6-d0c8-4acd-ba27-8a45741f439&title=&width=1124.8)
平台集成了4种电生理数据的可视化方法，包括

   1. ssp projections：信号空间投影的拓扑图
   2. channels series：通道时间序列的可视化
   3. sensor locations: 传感器位置分布
   4. power spectra：功率谱

![image.png](https://cdn.nlark.com/yuque/0/2024/png/1044341/1706165353412-7cd44c62-0f83-4ce2-b1d1-11d161cfbf4e.png#averageHue=%236b6a6a&clientId=u1f7c5e9b-4d12-4&from=paste&height=565&id=u574a6396&originHeight=706&originWidth=2251&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=208490&status=done&style=none&taskId=u79162bf4-b3d5-4053-b348-3eb7aea8820&title=&width=1800.8)

![image.png](https://cdn.nlark.com/yuque/0/2024/png/1044341/1704335892711-f325fb73-e0da-4130-b4ef-5a14d3024698.png#averageHue=%23b8b8b8&clientId=ued0072a3-7d60-4&from=paste&height=1280&id=u254f0cd8&originHeight=1408&originWidth=2568&originalType=binary&ratio=1.100000023841858&rotation=0&showTitle=false&size=228624&status=done&style=none&taskId=ubbd5cb58-4735-4ae4-a072-9a6e9a2a6ba&title=&width=2334.545403945546)

![image.png](https://cdn.nlark.com/yuque/0/2024/png/1044341/1706165382065-f032f011-520c-412d-a00f-a9a6d4e68b5a.png#averageHue=%23d8d7d6&clientId=u1f7c5e9b-4d12-4&from=paste&height=1030&id=u2a917eef&originHeight=1287&originWidth=2232&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=920204&status=done&style=none&taskId=ucb2e4d9d-b705-4435-93aa-407fe3e1d54&title=&width=1785.6)
可视化中可以很好地实现交互功能，包括

1. 对应点显示信息：

![image.png](https://cdn.nlark.com/yuque/0/2024/png/1044341/1704336014775-6ec22ce4-a3b6-4e8a-9cc0-fc35d63a4896.png#averageHue=%23f8f7f7&clientId=ued0072a3-7d60-4&from=paste&height=421&id=u332fe38c&originHeight=463&originWidth=558&originalType=binary&ratio=1.100000023841858&rotation=0&showTitle=false&size=40455&status=done&style=none&taskId=u3948101a-5c44-4cfa-af66-15b18775f68&title=&width=507.27271627788724)

![image.png](https://cdn.nlark.com/yuque/0/2024/png/1044341/1704336026324-f4ba171a-6a1c-4ba7-9e99-1022c8302a86.png#averageHue=%23f4f2f0&clientId=ued0072a3-7d60-4&from=paste&height=622&id=u71ef0da2&originHeight=684&originWidth=2117&originalType=binary&ratio=1.100000023841858&rotation=0&showTitle=false&size=841184&status=done&style=none&taskId=uf7a6257c-751f-409f-903f-68fee6a92bf&title=&width=1924.5454128320562)

2. 在频谱上点击拖动将弹出所选频率范围的头皮的地形图：

![image.png](https://cdn.nlark.com/yuque/0/2024/png/1044341/1704336043546-ddab111a-6a88-44c3-a29b-a16be9c62107.png#averageHue=%23f2f0ef&clientId=ued0072a3-7d60-4&from=paste&height=625&id=u6f53535b&originHeight=687&originWidth=1008&originalType=binary&ratio=1.100000023841858&rotation=0&showTitle=false&size=442348&status=done&style=none&taskId=u14411f06-c239-426c-8820-020bd723072&title=&width=916.3636165019899)

![image.png](https://cdn.nlark.com/yuque/0/2024/png/1044341/1704336074851-9cf3de23-d4ab-4b12-b175-87e0f6535fe1.png#averageHue=%23ada7a6&clientId=ued0072a3-7d60-4&from=paste&height=882&id=u29c940c0&originHeight=970&originWidth=1978&originalType=binary&ratio=1.100000023841858&rotation=0&showTitle=false&size=970621&status=done&style=none&taskId=u9bacede3-4517-48e3-8b40-18c00b79c11&title=&width=1798.1817792072777)

